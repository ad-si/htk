PACKAGE = uni-posixutil
PACKAGES = posix uni-events

ifeq "@WORK_AROUND_BDB_LINUX_BUG@" "1"
SRCS = CopyFile.hs ProcessClasses.hs FdRead.hs ChildProcess.hs \
   Expect.hs SafeSystem.hs ForkExec.hs SysVars.hs
else
SRCS = CopyFile.hs ProcessClasses.hs FdRead.hs ChildProcess.hs \
   Expect.hs SafeSystem.hs ForkExec.hs
endif


SRCSC = MainrunCommand.c forkExec.c Mainlog.c

EXTRAEXPORTS = runCommand

# For runCommand we link with -no-hs-main since it's not actually a Haskell
# program.
EXTRA_HC_OPTIONS += $($*_HC_OPTIONS)
runCommand_HC_OPTIONS = -no-hs-main
log_HC_OPTIONS = -no-hs-main

include @TOP@/mk/boilerplate.mk

prepareexports : runCommand
